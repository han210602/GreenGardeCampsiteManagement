@{
    var foodAndDrink = ViewBag.FoodAndDrink as List<FoodAndDrinkVM>;
    var foodAndDrinkCategories = ViewBag.FoodAndDrinkCategories as List<FoodAndDrinkCategoryVM>;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thực Đơn</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Source+Serif+Pro:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="~/css/Common/BookingFoodandDrink.css" asp-append-version="true" />
    <style>
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f9f9f9; /* Màu nền nhẹ nhàng */
        }

        .menu-container {
            display: flex;
            max-width: 1200px; /* Giới hạn chiều rộng tối đa của menu */
            margin: auto; /* Căn giữa */
            padding: 20px;
        }

        .menu-left {
            flex: 1; /* Chiếm 1 phần */
            margin-right: 20px; /* Khoảng cách bên phải */
            background: white; /* Màu nền trắng */
            border-radius: 8px; /* Bo tròn góc */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); /* Đổ bóng cho menu trái */
            padding: 15px; /* Padding cho menu trái */
        }

        .menu-header {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: darkorange; /* Màu chữ tiêu đề */
        }

        .menu-left ul {
            list-style: none; /* Không có dấu đầu dòng */
            padding: 0; /* Bỏ padding */
        }

        .menu-left li {
            margin-bottom: 10px; /* Khoảng cách giữa các danh mục */
        }

        .menu-left a {
            text-decoration: none; /* Bỏ gạch chân */
            color: #333; /* Màu chữ */
            padding: 10px; /* Padding cho khoảng cách */
            border-radius: 5px; /* Bo tròn góc */
            display: block; /* Đảm bảo toàn bộ khu vực có thể nhấp */
            transition: background-color 0.3s, color 0.3s; /* Hiệu ứng chuyển đổi */
        }

        .menu-left a:hover {
            background-color: #f0f0f0; /* Màu nền khi hover */
            color: darkorange; /* Màu chữ khi hover */
        }

        .active-category { /* Màu nền cho danh mục đang chọn */
            color: darkorange; /* Màu chữ cho danh mục đang chọn */
            font-weight: bold; /* Đặt độ đậm của chữ thành in đậm */
        }

        .menu-right {
            flex: 3; /* Chiếm 3 phần */
        }

        .sort-dropdown {
            margin-bottom: 20px; /* Khoảng cách giữa dropdown và danh sách */
        }

        .menu-item {
            display: flex;
            flex-wrap: wrap; /* Cho phép cuộn xuống */
        }

        .item-card {
            background: #fff; /* Màu nền trắng */
            border: 1px solid #ddd; /* Đường viền */
            border-radius: 8px; /* Bo tròn góc */
            margin: 10px; /* Khoảng cách giữa các thẻ */
            padding: 15px; /* Padding trong thẻ */
            flex: 1 1 calc(25% - 20px); /* Định dạng chiều rộng thẻ, 4 thẻ trên một hàng */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); /* Đổ bóng cho thẻ */
            transition: transform 0.2s; /* Hiệu ứng chuyển đổi */
        }

        .item-card:hover {
            transform: scale(1.05); /* Hiệu ứng phóng to khi hover */
        }

        .item-card img {
            max-width: 100%; /* Đảm bảo hình ảnh không vượt quá chiều rộng thẻ */
            border-radius: 5px; /* Bo tròn góc cho hình ảnh */
        }

        .price {
            font-size: 1.25rem; /* Kích thước chữ cho giá */
            color: darkorange; /* Màu chữ cho giá */
        }

        button {
            background-color: darkorange; /* Màu nền nút */
            color: white; /* Màu chữ nút */
            border: none; /* Bỏ đường viền */
            padding: 10px 15px; /* Padding cho nút */
            border-radius: 5px; /* Bo tròn góc nút */
            cursor: pointer; /* Đổi con trỏ khi hover */
            transition: background-color 0.3s; /* Hiệu ứng chuyển đổi */
        }

        button:hover {
            background-color: #ff8c00; /* Màu nền khi hover */
        }
    </style>
</head>
<body>
    <div class="menu-container">
        <div class="menu-left">
            <div class="menu-header">Đồ Dùng</div>
            <ul>
                <li>
                    <a class="@(ViewBag.CurrentCategoryId == null ? "active-category" : "")"
                       href="@Url.Action("BookingFoodAndDrink", "Common", new { sortBy = ViewBag.SortBy })">Tất cả</a>
                </li>
                @foreach (var category in ViewBag.FoodAndDrinkCategories)
                {
                    <li>
                        <a class="@(ViewBag.CurrentCategoryId == category.CategoryId ? "active-category" : "")"
                           href="@Url.Action("BookingFoodAndDrink", "Common", new { categoryId = category.CategoryId, sortBy = ViewBag.SortBy })">
                            @category.CategoryName
                        </a>
                    </li>
                }
            </ul>
        </div>

        <div class="menu-right">
            <div class="sort-dropdown">
                <label for="sort">Sắp xếp theo:</label>
                <select id="sort" onchange="sortFoodAndDrink()">
                    @if (ViewBag.SortBy == "1")
                    {
                        <option value="0">Mặc định</option>
                        <option value="1" selected>Giá: Thấp đến Cao</option>
                        <option value="2">Giá: Cao đến Thấp</option>
                        <option value="3">Phổ biến</option>
                        <option value="4">Mới nhất</option>
                    }
                    else if (ViewBag.SortBy == "2")
                    {
                        <option value="0">Mặc định</option>
                        <option value="1">Giá: Thấp đến Cao</option>
                        <option value="2" selected>Giá: Cao đến Thấp</option>
                        <option value="3">Phổ biến</option>
                        <option value="4">Mới nhất</option>
                    }
                    else if (ViewBag.SortBy == "3")
                    {
                        <option value="0">Mặc định</option>
                        <option value="1">Giá: Thấp đến Cao</option>
                        <option value="2">Giá: Cao đến Thấp</option>
                        <option value="3" selected>Phổ biến</option>
                        <option value="4">Mới nhất</option>
                    }
                    else if (ViewBag.SortBy == "4")
                    {
                        <option value="0">Mặc định</option>
                        <option value="1">Giá: Thấp đến Cao</option>
                        <option value="2">Giá: Cao đến Thấp</option>
                        <option value="3">Phổ biến</option>
                        <option value="4" selected>Mới nhất</option>
                    }
                    else
                    {
                        <option value="0" selected>Mặc định</option>
                        <option value="1">Giá: Thấp đến Cao</option>
                        <option value="2">Giá: Cao đến Thấp</option>
                        <option value="3">Phổ biến</option>
                        <option value="4">Mới nhất</option>

                    }

                </select>
            </div>
            <div class="menu-item">
                @if (foodAndDrink != null && foodAndDrink.Any())
                {
                    foreach (var item in foodAndDrink)
                    {
                        <div class="item-card">
                            <img src="https://i.ytimg.com/vi/XL0XM1uYuY8/maxresdefault.jpg" alt="@item.ItemName" />
                            <h3>@item.ItemName</h3>
                            <p class="price">@item.Price.ToString("N0") ₫</p>
                            <button>Thuê đồ</button>
                        </div>
                    }
                }
                else
                {
                    <p>Không có dữ liệu để hiển thị.</p>
                }
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        function sortFoodAndDrink() {
            const sortValue = document.getElementById("sort").value;
            const categoryId = '@ViewBag.CurrentCategoryId'; // Lấy categoryId hiện tại từ ViewBag nếu có
            const url = `@Url.Action("BookingFoodAndDrink", "Common")?categoryId=${categoryId}&sortBy=${sortValue}`;
            window.location.href = url;
        }
    </script>
</body>
</html>
